<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="Bookmark" href="/favicon.ico" >
    <link rel="Shortcut Icon" href="/favicon.ico" />
    <!--[if lt IE 9]>
    <script type="text/javascript" src="lib/html5shiv.js"></script>
    <script type="text/javascript" src="lib/respond.min.js"></script>

    <![endif]-->
    <link href="static/h-ui/css/H-ui.min.css" rel="stylesheet" type="text/css" />
    <link href="static/h-ui.admin/css/H-ui.admin.css" rel="stylesheet" type="text/css" />
    <link href="lib/Hui-iconfont/1.0.8/iconfont.css" rel="stylesheet" type="text/css" />

    <link rel="stylesheet" type="text/css" href="static/modify/css/common.css" />
    <link rel="stylesheet" type="text/css" href="static/modify/css/style.css" />
    <!-- <link rel="stylesheet" href="static/modify/css/platform-content-banner.css"> -->


    <!--[if IE 6]>
    <script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <title>banner管理-云端</title>
</head>
<body>
<div class="page-box-two bg-f2f2f2">
    <!-- 面包屑 -->
    <nav class="breadcrumb breadcrumb2"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 平台内容管理 <span class="c-gray en">&gt; PC-Banner管理</nav>
    <div class="box-content bg-fff">
        <div class="box-table">
            <table class="table table-border table-bordered table-hover">
                <thead class="text-c">
                    <tr>
                        <th width="80">banner顺序</th>
                        <th>分辨率</th>
                        <th>建议文件大小</th>
                        <th>文件格式</th>
                        <th>链接</th>
                        <th>状态</th>
                        <th width="100">操作</th>
                    </tr>
                </thead>
                <tbody class="text-c">
                  <tr>
                      <td>1</td>
                      <td>500*888</td>
                      <td>不超过2M</td>
                      <td>JPG</td>
                      <td>http://www.baidu.com/</td>
                      <td class="t-state">启用</td>
                      <td class="td-manage">
                          <a href="javascript:;" onclick="banner_edit(this,'001')">编辑</a>
                          <a href="javascript:;" class="ml-15" onclick="banner_lock(this,'001')">暂停</a>
                      </td>
                  </tr>
                  <tr>
                      <td>2</td>
                      <td>500*888</td>
                      <td>不超过2M</td>
                      <td>JPG</td>
                      <td>http://www.baidu.com/</td>
                      <td class="t-state">启用</td>
                      <td class="td-manage">
                          <a href="javascript:;" onclick="banner_edit(this,'002')">编辑</a>
                          <a href="javascript:;" class="ml-15" onclick="banner_lock(this,'002')">暂停</a>
                      </td>
                  </tr>
                  <tr>
                      <td>3</td>
                      <td>500*888</td>
                      <td>不超过2M</td>
                      <td>JPG</td>
                      <td>http://www.baidu.com/</td>
                      <td class="t-state">启用</td>
                      <td class="td-manage">
                          <a href="javascript:;" onclick="banner_edit(this,'003')">编辑</a>
                          <a href="javascript:;" class="ml-15" onclick="banner_lock(this,'003')">暂停</a>
                      </td>
                  </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="box-footer">
        <p>©2010-2017 云端 · 私募荟 版权所有</p>
    </div>
</div>
<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/jquery.validate.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/validate-methods.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/messages_zh.js"></script>
<script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.js"></script>
<script type="text/javascript" src="static/modify/js/common.js"></script>
<script type="text/javascript">
    //图片上传预览
    jQuery("body").on('change','#fileImg',function(){   
     var file = this.files[0];
       if (window.FileReader) {    
                var reader = new FileReader();    
                reader.readAsDataURL(file);
                reader.onloadend = function (e) {
                $("#blah").attr("src",e.target.result); 
                };    
           } 
    });
    //启用超链接
    $('body').on('click','#checkbox-start',function(){
        if($(this).is(':checked')){ 
                    $(this).parents('.layui-form-item').find('#url').prop('disabled',false);
                }else{ 
                    $(this).parents('.layui-form-item').find('#url').prop('disabled',true).val('');
                } 
            });
    /* banner-编辑 */
    function banner_edit(obj,id){
        layCon ='<form class="layui-form bomb-form" action="" method="" id="editForm">\
                      <div class="layui-form-item">\
                          <label class="layui-form-label size-L" for="order">Banner顺序：</label>\
                          <div class="layui-input-block size-L">\
                              <input type="text" name="order" id="order" placeholder="请输入Banner顺序" autocomplete="off" class="layui-input radius">\
                          </div>\
                      </div>\
                      <div class="layui-form-item">\
                          <label class="layui-form-label size-L" for="">Banner图片：</label>\
                          <div class="layui-input-block size-L">\
                              <span class="btn-upload btn-upload-banner">\
                                <a href="javascript:;" class="btn btn-orange-bg radius">上传图片</a>\
                                <input type="file" name="fileImg" id="fileImg" class="file-btn error" accept="image/*" aria-required="true" aria-invalid="true">\
                                <img id="blah" class="mt-10 radius" src="static/modify/img/default-img.png" width="285" height="160" alt="banner">\
                                <p class="f-12 c-999 mt-5">建议文件大小不超过2M，建议分辨率660*888</p>\
                              </span>\
                          </div>\
                      </div>\
                      <div class="layui-form-item">\
                          <label class="layui-form-label size-L" for="url">\
                            <div class="check-box" style="padding:0;">\
                                <input type="checkbox" id="checkbox-start">\
                                <label for="checkbox-home">启动超链接</label>\
                            </div></label>\
                          <div class="layui-input-block size-L">\
                              <input type="url" name="url" id="url" placeholder="请输入超链接" autocomplete="off" disabled class="layui-input radius">\
                          </div>\
                      </div>\
                      <p class="error-box error-box-edit"></p>\
                    </form>';

                    //弹框
                    layer.open({
                      type: 1 
                      ,area: ['490px','550px']
                      ,title: '编辑Banner'
                      ,maxmin: false
                      ,anim: 1 
                      ,move:false
                      ,content: layCon
                      ,btn: ['确认']
                      ,yes: function(index){
                        var editVali = $('#editForm').validate({
                                        rules:{
                                            order:{
                                                required:true,
                                                range:[1,5]
                                            },
                                            fileImg:'required',
                                            url:{
                                                url:true
                                            }
                                        },
                                        messages:{
                                            order:{
                                                required:'请输入Banner顺序',
                                                range:'请输入1-5的数字'
                                            },
                                            fileImg:'请上传图片',
                                            url:{
                                                url:'请输入正确格式的网址，如http://'
                                            }
                                        },
                                        submitHandler:function(form){
                                            form.submit();
                                        },
                                        groups:{
                                            banneredit:'order fileImge url'
                                        },
                                        errorPlacement:function(error,element){
                                            $('.error-box-edit').append(error);
                                        },
                                        onfocusout:function(element){
                                            $(element).valid();
                                        },
                                        onsubmit:false,
                                        focusCleanup:true
                                    });
                        if(editVali.element('#order') && editVali.element('#fileImg') && editVali.element('#url')){
                            layer.close(index);
                            layer.open({
                              type: 1
                              ,area: ['460px']
                              ,title: ''
                              ,maxmin: false
                              ,anim: 1 
                              ,move:false
                              ,content: '<div class="layer-tip layer-tip2"><i class="ico-global ico-ok"></i><p class="p2 mt-35">编辑成功！</p></div>'
                              ,btn: ['确认']
                              ,yes: function(index){layer.close(index);}
                            });
                        }
                        
                      }
                    });

    }

    /* banner-暂停/开启 */
    function banner_lock(obj,id){
        var eState = $(obj).parents('tr').find('.t-state'),
            msg = '';
            if(eState.text()=='启用'){
                msg = '暂停';
            }else{
                msg = '启用'
            };
            layer.open({
                  type: 1
                  ,area: ['460px']
                  ,title: ' '
                  ,maxmin: false
                  ,anim: 1 
                  ,content:'<div class="layer-tip"><p class="p3">确定将该Banner'+ msg +'</p></div>'
                  ,btn: ['确认','取消']
                  ,yes: function(index){
                    if(msg=='暂停'){
                        $(obj).text('启用');
                        eState.text('暂停')
                    }else{
                        $(obj).text('暂停');
                        eState.text('启用')
                    }
                    layer.close(index);
                    layer.msg('已'+msg+'！',{time:1000});
                  }
                });

    }
</script>
</body>
</html>